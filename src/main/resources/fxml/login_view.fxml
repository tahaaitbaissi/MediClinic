<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<StackPane xmlns="http://javafx.com/javafx/11.0.1"
           xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="com.mediclinic.controller.LoginController"
           stylesheets="@../css/style.css"
           styleClass="background"
           prefWidth="1000" prefHeight="700">

    <!-- Centered Login Card -->
    <VBox styleClass="card" alignment="CENTER" spacing="24" maxWidth="450" style="-fx-padding: 48;">
        
        <!-- Logo and Branding -->
        <VBox alignment="CENTER" spacing="12">
            <Label text="MediClinic" styleClass="title" style="-fx-font-size: 32px; -fx-font-weight: 700;"/>
            <Label text="Système de Gestion Médicale Professionnelle" 
                   style="-fx-text-fill: #6b7280; -fx-font-size: 14px; -fx-text-alignment: center;" 
                   wrapText="true" maxWidth="350"/>
        </VBox>

        <!-- Separator -->
        <Separator style="-fx-padding: 8 0;"/>

        <!-- Form Title -->
        <Label fx:id="formTitle" text="Connexion" 
               style="-fx-font-size: 20px; -fx-font-weight: 700; -fx-text-fill: #1f2937;"/>

        <!-- Error Message -->
        <Label fx:id="errorLabel" text="" 
               styleClass="alert-error" 
               wrapText="true" 
               maxWidth="400"
               managed="false" 
               visible="false"/>

        <!-- Username Field -->
        <VBox spacing="8" maxWidth="400">
            <Label text="Nom d'utilisateur" styleClass="form-label"/>
            <TextField fx:id="usernameField" 
                      promptText="Entrez votre nom d'utilisateur" 
                      styleClass="text-field"
                      prefHeight="45"/>
        </VBox>

        <!-- Password Field -->
        <VBox spacing="8" maxWidth="400">
            <Label text="Mot de passe" styleClass="form-label"/>
            <PasswordField fx:id="passwordField" 
                          promptText="Entrez votre mot de passe" 
                          styleClass="password-field"
                          prefHeight="45"/>
        </VBox>

        <!-- Confirm Password Field (Register mode only) -->
        <VBox fx:id="confirmPasswordBox" spacing="8" maxWidth="400" visible="false" managed="false">
            <Label text="Confirmer le mot de passe" styleClass="form-label"/>
            <PasswordField fx:id="confirmPasswordField" 
                          promptText="Confirmez votre mot de passe" 
                          styleClass="password-field"
                          prefHeight="45"/>
        </VBox>

        <!-- Login Button -->
        <Button fx:id="loginBtn" 
                text="Se connecter" 
                styleClass="btn-primary" 
                prefWidth="400" 
                prefHeight="48" 
                onAction="#handleLogin"
                style="-fx-font-size: 15px; -fx-font-weight: 700;"/>

        <!-- Register Button (hidden by default) -->
        <Button fx:id="registerBtn" 
                text="Créer le compte" 
                styleClass="btn-success" 
                prefWidth="400" 
                prefHeight="48" 
                onAction="#handleRegister"
                visible="false" 
                managed="false"
                style="-fx-font-size: 15px; -fx-font-weight: 700;"/>

        <!-- Toggle Link -->
        <HBox alignment="CENTER" spacing="6">
            <Label fx:id="toggleLabel" 
                   text="Pas encore de compte?" 
                   style="-fx-text-fill: #6b7280;"/>
            <Hyperlink fx:id="toggleLink" 
                      text="Créer un compte" 
                      onAction="#toggleMode"
                      styleClass="hyperlink"/>
        </HBox>

        <!-- Footer -->
        <Label text="© 2024 MediClinic - Tous droits réservés" 
               style="-fx-text-fill: #9ca3af; -fx-font-size: 12px;" 
               VBox.vgrow="NEVER"/>

    </VBox>

</StackPane>
